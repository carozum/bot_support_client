<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Interface d'administration</title>
</head>
<body>

  <nav>
    <a href="/admin">Admin</a> |
    <a href="/chat">Chat</a>
  </nav>


  <h1>Interface d'administration</h1>

  <h2>Upload d’un fichier PDF</h2>

  <form action="/upload" enctype="multipart/form-data" method="post">
    <input type="file" name="file" accept="application/pdf" required>
    <button type="submit">Envoyer</button>
  </form>

  <h2>Fichiers déjà présents dans data-brute :</h2>
    <ul>
      {% for file in files %}
        <li>{{ file }}
          <form method="post" action="{{ url_for('delete_file') }}" style="display:inline;">
            <input type="hidden" name="filename" value="{{ file }}">
            <button type="submit">Supprimer</button>
          </form>
        </li>
      {% else %}
        <li>Aucun fichier pour le moment.</li>
      {% endfor %}
    </ul>

  <h2>Monitoring Grafana (via Prometheus)</h2>

  <!-- Lien vers Grafana complet -->
  <p>
    <a href="/grafana" target="_blank">Ouvrir le dashboard complet Grafana</a>
  </p>
  <iframe src="https://customer.bot-support.fr/grafana/d-solo/fea3x93t76328c/fastapi-observability?orgId=1&from=now-24h&to=now&timezone=browser&var-app_name=fastapi&var-DS_PROMETHEUS=feisgc94270g0d&refresh=5s&panelId=4&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
  <iframe src="https://customer.bot-support.fr/grafana/d-solo/fea3x93t76328c/fastapi-observability?orgId=1&from=now-24h&to=now&timezone=browser&var-app_name=fastapi&var-DS_PROMETHEUS=feisgc94270g0d&refresh=5s&panelId=16&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
  <iframe src="https://customer.bot-support.fr/grafana/d-solo/fea3x93t76328c/fastapi-observability?orgId=1&from=1744568083375&to=1744571683375&timezone=browser&var-app_name=fastapi&var-DS_PROMETHEUS=feisgc94270g0d&refresh=5s&panelId=6&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
  <iframe src="https://customer.bot-support.fr/grafana/d-solo/fea3x93t76328c/fastapi-observability?orgId=1&from=now-24h&to=now&timezone=browser&var-app_name=fastapi&var-DS_PROMETHEUS=feisgc94270g0d&refresh=5s&panelId=16&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
</body>
</html>

