<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <title>Interface d'administration</title>
</head>
<body class="bg-light d-flex flex-column min-vh-100">
<div class="flex-grow-1">
    <nav class="navbar navbar-expand-lg navbar-light bg-white shadow-sm mb-4">
      <div class="container">
        <a class="navbar-brand fw-bold" href="#">Interface d'aide en ligne</a>
        <div>
          <a class="nav-link d-inline px-2" href="/admin">Admin</a>
          <a class="nav-lik d-inline px-2" href="http://51.15.230.206:3000/" target="_blank">Grafana</a>
          <a class="nav-link d-inline px-2" href="/validation">Validation du dataset</a>
          <a class="nav-link d-inline px-2" href="/evaluation">Évaluation des modèles</a>
          <a class="nav-link d-inline px-2" href="/chat">Aide en ligne</a>
        </div>
      </div>
    </nav>

<div class="container">
  <h1 class="mb-4">Interface d'administration</h1>

  <h2 class="h5">Upload d’un fichier PDF</h2>

  <form action="/upload" enctype="multipart/form-data" method="post" class="mb-4">
    <label for="file" class="form-label">Sélectionnez un fichier PDF :</label>
    <input type="file"  class="form-control" name="file" accept="application/pdf" required>
    <button type="submit" class="btn btn-primary mt-2">Envoyer</button>
  </form>

  <h2 class="h5">Fichiers déjà présents dans data-brute :</h2>
    <ul  class="list-group mb-4">
      {% for file in files %}
        <li class="list-group-item d-flex justify-content-between align-items-center">
          {{ file }}
          <form method="post" action="/delete" style="display:inline;" class="m-0">
            <input type="hidden" name="filename" value="{{ file }}">
            <button type="submit" class="btn btn-sm btn-outline-danger">Supprimer</button>
          </form>
        </li>
      {% else %}
        <li class="list-group-item">Aucun fichier pour le moment.</li>
      {% endfor %}
    </ul>

<!--  <h2 class="h5">Monitoring Grafana (via Prometheus)</h2>-->

  <!-- Lien vers Grafana complet -->
<!-- <p>
    <a href="/grafana"  class="btn btn-link" target="_blank">Ouvrir le dashboard complet Grafana</a>
  </p>
  <div class="ratio ratio-16x9 mb-5">
    <iframe src="https://customer.bot-support.fr/grafana/d-solo/fea3x93t76328c/fastapi-observability?orgId=1&from=now-24h&to=now&timezone=browser&var-app_name=fastapi&var-DS_PROMETHEUS=feisgc94270g0d&refresh=5s&panelId=4&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
  </div>
  <div class="ratio ratio-16x9 mb-5"> 
    <iframe src="https://customer.bot-support.fr/grafana/d-solo/fea3x93t76328c/fastapi-observability?orgId=1&from=now-24h&to=now&timezone=browser&var-app_name=fastapi&var-DS_PROMETHEUS=feisgc94270g0d&refresh=5s&panelId=16&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
  </div>
  <div class="ratio ratio-16x9 mb-5">
    <iframe src="https://customer.bot-support.fr/grafana/d-solo/fea3x93t76328c/fastapi-observability?orgId=1&timezone=browser&var-app_name=fastapi&var-DS_PROMETHEUS=feisgc94270g0d&refresh=5s&kiosk=&panelId=6&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
  </div>
  <div class="ratio ratio-16x9 mb-5">
    <iframe src="https://customer.bot-support.fr/grafana/d-solo/fea3x93t76328c/fastapi-observability?orgId=1&timezone=browser&var-app_name=fastapi&var-DS_PROMETHEUS=feisgc94270g0d&refresh=5s&kiosk=&panelId=18&__feature.dashboardSceneSolo" width="450" height="200" frameborder="0"></iframe>
  </div>
-->
</div>
</div>
<footer class="text-center py-3 bg-white border-top mt-auto text-muted small">
  Interface d'administration — @ Octime 2025 - CaroZum
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>

